require=(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Uniform = Uniform;
exports.Exponential = Exponential;
exports.Normal = Normal;
exports.Pareto = Pareto;
exports.Loglogistic = Loglogistic;
exports.Weibull = Weibull;
exports.Erlang = Erlang;
exports.Triangular = Triangular;
exports.Trapezoidal = Trapezoidal;
exports.LogNormal = LogNormal;
exports.Bernoulli = Bernoulli;
exports.Binomial = Binomial;
exports.Geometric = Geometric;
exports.Poisson = Poisson;
exports.Gamma = Gamma;
exports.random = exports.functionNameList = exports.menuList = void 0;
var menuList = ["Uniform(0.0,1.0)", "Exponential(1.0)", "Normal(0.0,1.0)", "Pareto(1.0,1.0)", "Weibull(1.0,1.0)", "Triangular(0.0,1.0,0.5)", "Trapezoidal(0.0,1.0,0.25,0.75)", "LogNormal(0.0,1.0)", "Gamma(1.0,1.0)", "Loglogistic(1.0,0.5)", "Erlang(4,0.5)", "Bernoulli(0.5)", "Binomial(2,0.5)", "Geometric(0.5)", "Poisson(2.0)"];
exports.menuList = menuList;
var functionNameList = ["Uniform", "Exponential", "Normal", "Pareto", "Weibull", "Triangular", "Trapezoidal", "LogNormal", "Gamma", "Loglogistic", "Erlang", "Bernoulli", "Binomial", "Geometric", "Poisson"];
exports.functionNameList = functionNameList;
var random = Math.random;
/**
 * Uniform distribution implementation.
 * More details at A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 452
 * @param a lower bound
 * @param b upper bound, b >= a
 * @returns Uniform distributed random value
 */

exports.random = random;

function Uniform(a, b) {
  if (a == null) a = 0.0;
  if (b == null) b = 1.0;
  if (b < a) return NaN;
  return a + (b - a) * Math.random();
}
/**
 * Exponential distribution mplementation based on A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 452 
 * @param beta shape parameter, beta > 0,  lambda = 1/beta. For exponential distribution beta is equal to the mean.
 * @returns Exponentially distributed random value
 */


function Exponential(beta) {
  if (beta == null) beta == 1;
  if (beta <= 0) return NaN;
  return -beta * Math.log(Math.random());
}
/**
 * Normal distribution implementation based on Box and Muller (1958) algorithm
 * Please note that in order to not to store state in this library we use only odd values
 * For discussion see A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 457
 * @param mean mean value
 * @param std standard deviation, std>=0
 * @returns Normally distributed random value
 */


function Normal(mean, std) {
  if (mean == null) mean = 0.0;
  if (std == null) std = 1.0;
  if (std < 0) return NaN;
  var n = Math.sqrt(-2.0 * Math.log(Math.random())) * Math.cos(2.0 * Math.PI * Math.random());
  return n * std + mean;
}
/**
 * Pareto distribution implementation based on 
 * https://en.wikipedia.org/wiki/Pareto_distribution#Random_sample_generation
 * 
 * @param alpha shape parameter, alpha > 0
 * @param minimum scale parameter, minimum > 0
 * @returns
 */


function Pareto(alpha, minimum) {
  if (alpha == null) alpha = 1.0;
  if (minimum == null) minimum = 1.0;
  if (alpha <= 0 || minimum <= 0) return NaN;
  return minimum / Math.pow(Math.random(), 1.0 / alpha);
}
/**
 * Log-logistic distribution implementation based on A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 460
 * @param alpha shape parameter, alpha > 0
 * @param beta scale parameter, beta > 0
 * @returns Log-logistic distributed random value
 */


function Loglogistic(alpha, beta) {
  if (alpha == null) alpha = 1.0;
  if (beta == null) beta = 1.0;
  if (beta <= 0 || alpha <= 0) return NaN;
  var u = Math.random();
  return beta * Math.pow(u / (1 - u), 1 / alpha);
}
/**
 * Weibull distribution implementation based on A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 456
 * @param alpha shape parameter, alpha > 0
 * @param beta scale parameter, beta > 0
 * @returns Weibull distributed random value
 */


function Weibull(alpha, beta) {
  if (alpha == null) alpha = 1.0;
  if (beta == null) beta = 1.0;
  if (beta <= 0 || alpha <= 0) return NaN;
  return beta * Math.pow(-Math.log(1.0 - Math.random()), 1.0 / alpha);
}
/**
 * Erlang distribution implementation based on A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 453
 * @param k shape parameter, k = 1,2,3,...
 * @param beta scale parameter, beta > 0, beta = 1/lambda. For Erlang distribution beta is equal to the mean value.
 * @returns Erlang distributed random value
 */


function Erlang(k, beta) {
  if (k == null) k = 1;
  if (beta == null) beta = 1.0;
  var m = k | 0;
  if (beta <= 0 || m <= 0) return NaN;
  var mult = 1.0;

  for (var i = 0; i < m; i++) {
    mult *= Math.random();
  }

  return -beta / m * Math.log(mult);
}
/**
 * Triangular distribution implementation
 * @param a left side
 * @param b right side, b >= a
 * @param m triangle peak (mode), a <= m <= b
 * @returns Triangular distributed random value
 */


function Triangular(a, b, m) {
  if (a == null) a = 0.0;
  if (b == null) b = 1.0;
  if (m == null) m = 0.5;
  if (a > b || m < a || m > b) return NaN;
  if (a == b) return a;
  var c = (m - a) / (b - a);
  var p = Math.random();

  if (p <= c) {
    return a + Math.sqrt(p * (b - a) * (m - a));
  } else {
    return b - Math.sqrt((1 - p) * (b - a) * (b - m));
  }
}
/**
 * Trapezoidal distribution implementation
 * @param a left side
 * @param b right side, b >= a
 * @param c left trapezoid peak (mode)
 * @param d right trapezoid peak (mode), a <= c <= d <= b
 * @returns Trapezoidal distributed random value
 */


function Trapezoidal(a, b, c, d) {
  if (a == null) a = 0.0;
  if (b == null) b = 1.0;
  if (c == null) c = 0.25;
  if (d == null) d = 0.75;
  if (a > b || c < a || c > d || d > b) return NaN;
  if (a == b) return a;
  var p1 = (c - a) / (b - a + (d - c));
  var p2 = (b - d) / (b - a + (d - c));
  var p = Math.random();

  if (p <= p1) {
    return a + Math.sqrt(p * (b - a + (d - c)) * (c - a));
  } else if (p > 1 - p2) {
    return b - Math.sqrt((1 - p) * (b - a + (d - c)) * (b - d));
  } else {
    return c + (d - c) * (p - p1) / (1.0 - p1 - p2);
  }
}
/**
 * Lognormal distribution implementation based on A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 458
 * @param mean mean value
 * @param std standard deviation
 * @returns Lognormally distributed random value
 */


function LogNormal(mean, std) {
  if (mean == null) mean = 0.0;
  if (std == null) std = 1.0;
  if (std < 0) return NaN;
  return Math.exp(Normal(mean, std));
}
/**
 * Bernoulli distribution implementation based on A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 464
 * @param p probability of 1
 * @returns Bernoulli distributed random value (zero or one)
 */


function Bernoulli(p) {
  if (p == null) p = 0.5;
  if (p < 0.0 | p > 1.0) return NaN;
  if (Math.random() <= p) return 1;else return 0;
}
/**
 * Binomial distribution implementation based on A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 469
 * @param n number of trials
 * @param p success probability in each trial
 * @returns Binomial distributed random value (0,1,...,n)
 */


function Binomial(n, p) {
  if (n == null) n = 1;
  if (p == null) p = 0.5;
  var t = n | 0;
  if (p < 0.0 | p > 1.0 | t <= 0) return NaN;
  var sum = 0;

  for (var i = 0; i < t; i++) {
    sum += Bernoulli(p);
  }

  return sum;
}
/**
 * Geometric distribution implementation based on A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 469
 * @param p success probability 
 * @returns Geometric distributed random value 
 */


function Geometric(p) {
  if (p == null) p = 0.5;
  if (p <= 0.0 | p >= 1.0) return NaN;
  return Math.floor(Math.log(Math.random()) / Math.log(1 - p)) | 0;
}
/**
 * Poisson distribution implementation based on A.Law "Simulation Modelling and Analysis", 5e, Mc Graw-Hill, 2015, p. 470
 * @param lambda mean value 
 * @returns Poisson distributed random value 
 */


function Poisson(lambda) {
  if (lambda == null) lambda = 1.0;
  if (lambda <= 0.0) return NaN;
  var a = Math.exp(-lambda);
  var b = 1.0;
  var i = 0;

  while (true) {
    var u = Math.random();
    b *= u;
    if (b < a) return i;
    i += 1;
  }
}
/**
 * Gamma distribution implementation.
 * This code has been copied from
 * https://github.com/btelles/simjs-updated/
 * simjs-updated is licensed under MIT Open Source License termns 
 * @param alpha shape parameter
 * @param beta rate parameter 
 * @returns Gamma distributed random value.
 */


function Gamma(alpha, beta) {
  if (alpha == null) alpha = 1.0;
  if (beta == null) beta = 1.0;

  if (alpha > 1.0) {
    var ainv = Math.sqrt(2.0 * alpha - 1.0),
        bbb = alpha - Math.log(4.0),
        ccc = alpha + ainv;

    while (true) {
      // eslint-disable-line no-constant-condition
      var u1 = random();

      if (u1 < 1e-7 || u > 0.9999999) {
        continue;
      }

      var u2 = 1.0 - random(),
          v = Math.log(u1 / (1.0 - u1)) / ainv,
          x = alpha * Math.exp(v),
          z = u1 * u1 * u2,
          r = bbb + ccc * v - x;

      if (r + Math.log(4.5) - 3.5 * z >= 0.0 || r >= Math.log(z)) {
        return x * beta;
      }
    }
  } else if (alpha == 1.0) {
    var _u = random();

    while (_u <= 1e-7) {
      _u = random();
    }

    return -Math.log(_u) * beta;
  } else {
    var _x;

    while (true) {
      var _u2 = random(),
          b = (Math.E + alpha) / Math.E,
          p = b * _u2;

      if (p <= 1.0) {
        _x = Math.pow(p, 1.0 / alpha);
      } else {
        _x = -Math.log((b - p) / alpha);
      }

      var _u3 = random();

      if (p > 1.0) {
        if (_u3 <= Math.pow(_x, alpha - 1.0)) {
          break;
        }
      } else if (_u3 <= Math.exp(-_x)) {
        break;
      }
    }

    return _x * beta;
  }
}

},{}],"sd-random":[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _sdRandom = require("./src/sd-random");

Object.keys(_sdRandom).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _sdRandom[key];
    }
  });
});

},{"./src/sd-random":1}]},{},[])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2QtcmFuZG9tLmpzIiwiaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBTyxJQUFNLFFBQVEsR0FBRyxDQUFBLGtCQUFBLEVBQUEsa0JBQUEsRUFBQSxpQkFBQSxFQUFBLGlCQUFBLEVBQUEsa0JBQUEsRUFBQSx5QkFBQSxFQUFBLGdDQUFBLEVBQUEsb0JBQUEsRUFBQSxnQkFBQSxFQUFBLHNCQUFBLEVBQUEsZUFBQSxFQUFBLGdCQUFBLEVBQUEsaUJBQUEsRUFBQSxnQkFBQSxFQUFqQixjQUFpQixDQUFqQjs7QUFTQSxJQUFNLGdCQUFnQixHQUFHLENBQUEsU0FBQSxFQUFBLGFBQUEsRUFBQSxRQUFBLEVBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxZQUFBLEVBQUEsYUFBQSxFQUFBLFdBQUEsRUFBQSxPQUFBLEVBQUEsYUFBQSxFQUFBLFFBQUEsRUFBQSxXQUFBLEVBQUEsVUFBQSxFQUFBLFdBQUEsRUFBekIsU0FBeUIsQ0FBekI7O0FBVUEsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFuQixNQUFBO0FBRVA7Ozs7Ozs7Ozs7QUFPTyxTQUFBLE9BQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxFQUF1QjtBQUMxQixNQUFJLENBQUMsSUFBTCxJQUFBLEVBQWUsQ0FBQyxHQUFELEdBQUE7QUFDZixNQUFJLENBQUMsSUFBTCxJQUFBLEVBQWUsQ0FBQyxHQUFELEdBQUE7QUFDbEIsTUFBSSxDQUFDLEdBQUwsQ0FBQSxFQUFXLE9BQUEsR0FBQTtBQUNSLFNBQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFGLENBQUEsSUFBUSxJQUFJLENBQXZCLE1BQW1CLEVBQW5CO0FBQ0g7QUFFRDs7Ozs7OztBQUtPLFNBQUEsV0FBQSxDQUFBLElBQUEsRUFBMkI7QUFDakMsTUFBSSxJQUFJLElBQVIsSUFBQSxFQUFnQixJQUFJLElBQUosQ0FB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QUEsQ0FBQSxVQUFBLEdBQUEsRUFBQTtBQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsSUFBQSxHQUFBLEtBQUEsWUFBQSxFQUFBO0FBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQSxJQUFBLFVBQUEsRUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLEdBQUE7QUFBQSxhQUFBLFNBQUEsQ0FBQSxHQUFBLENBQUE7QUFBQTtBQUFBLEdBQUE7QUFBQSxDQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZXhwb3J0IGNvbnN0IG1lbnVMaXN0ID0gW1wiVW5pZm9ybSgwLjAsMS4wKVwiLCBcIkV4cG9uZW50aWFsKDEuMClcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICBcIk5vcm1hbCgwLjAsMS4wKVwiLCBcIlBhcmV0bygxLjAsMS4wKVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgIFwiV2VpYnVsbCgxLjAsMS4wKVwiLCBcIlRyaWFuZ3VsYXIoMC4wLDEuMCwwLjUpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgXCJUcmFwZXpvaWRhbCgwLjAsMS4wLDAuMjUsMC43NSlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICBcIkxvZ05vcm1hbCgwLjAsMS4wKVwiLCBcIkdhbW1hKDEuMCwxLjApXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgXCJMb2dsb2dpc3RpYygxLjAsMC41KVwiLFwiRXJsYW5nKDQsMC41KVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgIFwiQmVybm91bGxpKDAuNSlcIixcIkJpbm9taWFsKDIsMC41KVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgIFwiR2VvbWV0cmljKDAuNSlcIiwgXCJQb2lzc29uKDIuMClcIl07XG5cbmV4cG9ydCBjb25zdCBmdW5jdGlvbk5hbWVMaXN0ID0gW1wiVW5pZm9ybVwiLCBcIkV4cG9uZW50aWFsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIk5vcm1hbFwiLCBcIlBhcmV0b1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJXZWlidWxsXCIsIFwiVHJpYW5ndWxhclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJUcmFwZXpvaWRhbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJMb2dOb3JtYWxcIiwgXCJHYW1tYVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJMb2dsb2dpc3RpY1wiLFwiRXJsYW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkJlcm5vdWxsaVwiLFwiQmlub21pYWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiR2VvbWV0cmljXCIsIFwiUG9pc3NvblwiXTtcblxuXG5leHBvcnQgY29uc3QgcmFuZG9tID0gTWF0aC5yYW5kb207XG5cbi8qKlxuICogVW5pZm9ybSBkaXN0cmlidXRpb24gaW1wbGVtZW50YXRpb24uXG4gKiBNb3JlIGRldGFpbHMgYXQgQS5MYXcgXCJTaW11bGF0aW9uIE1vZGVsbGluZyBhbmQgQW5hbHlzaXNcIiwgNWUsIE1jIEdyYXctSGlsbCwgMjAxNSwgcC4gNDUyXG4gKiBAcGFyYW0gYSBsb3dlciBib3VuZFxuICogQHBhcmFtIGIgdXBwZXIgYm91bmQsIGIgPj0gYVxuICogQHJldHVybnMgVW5pZm9ybSBkaXN0cmlidXRlZCByYW5kb20gdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFVuaWZvcm0oYSwgYikge1xuICAgIGlmIChhID09IG51bGwpIGEgPSAwLjA7XG4gICAgaWYgKGIgPT0gbnVsbCkgYiA9IDEuMDtcblx0aWYgKGIgPCBhKSByZXR1cm4gTmFOO1xuICAgIHJldHVybiBhICsgKGIgLSBhKSpNYXRoLnJhbmRvbSgpO1xufVxuXG4vKipcbiAqIEV4cG9uZW50aWFsIGRpc3RyaWJ1dGlvbiBtcGxlbWVudGF0aW9uIGJhc2VkIG9uIEEuTGF3IFwiU2ltdWxhdGlvbiBNb2RlbGxpbmcgYW5kIEFuYWx5c2lzXCIsIDVlLCBNYyBHcmF3LUhpbGwsIDIwMTUsIHAuIDQ1MiBcbiAqIEBwYXJhbSBiZXRhIHNoYXBlIHBhcmFtZXRlciwgYmV0YSA+IDAsICBsYW1iZGEgPSAxL2JldGEuIEZvciBleHBvbmVudGlhbCBkaXN0cmlidXRpb24gYmV0YSBpcyBlcXVhbCB0byB0aGUgbWVhbi5cbiAqIEByZXR1cm5zIEV4cG9uZW50aWFsbHkgZGlzdHJpYnV0ZWQgcmFuZG9tIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBFeHBvbmVudGlhbChiZXRhKSB7XG5cdGlmIChiZXRhPT1udWxsKSBiZXRhID09IDE7XG5cdGlmIChiZXRhPD0wKSByZXR1cm4gTmFOO1x0XG4gICAgcmV0dXJuIC1iZXRhICogTWF0aC5sb2coTWF0aC5yYW5kb20oKSk7XG59XG5cbi8qKlxuICogTm9ybWFsIGRpc3RyaWJ1dGlvbiBpbXBsZW1lbnRhdGlvbiBiYXNlZCBvbiBCb3ggYW5kIE11bGxlciAoMTk1OCkgYWxnb3JpdGhtXG4gKiBQbGVhc2Ugbm90ZSB0aGF0IGluIG9yZGVyIHRvIG5vdCB0byBzdG9yZSBzdGF0ZSBpbiB0aGlzIGxpYnJhcnkgd2UgdXNlIG9ubHkgb2RkIHZhbHVlc1xuICogRm9yIGRpc2N1c3Npb24gc2VlIEEuTGF3IFwiU2ltdWxhdGlvbiBNb2RlbGxpbmcgYW5kIEFuYWx5c2lzXCIsIDVlLCBNYyBHcmF3LUhpbGwsIDIwMTUsIHAuIDQ1N1xuICogQHBhcmFtIG1lYW4gbWVhbiB2YWx1ZVxuICogQHBhcmFtIHN0ZCBzdGFuZGFyZCBkZXZpYXRpb24sIHN0ZD49MFxuICogQHJldHVybnMgTm9ybWFsbHkgZGlzdHJpYnV0ZWQgcmFuZG9tIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBOb3JtYWwobWVhbiwgc3RkKSB7XG4gICAgaWYgKG1lYW4gPT0gbnVsbCkgbWVhbiA9IDAuMDtcbiAgICBpZiAoc3RkID09IG51bGwpIHN0ZCA9IDEuMDtcbiAgICBpZiAoc3RkIDwgMCkgcmV0dXJuIE5hTjtcblxuICAgIGxldCBuID0gTWF0aC5zcXJ0KC0yLjAgKiBNYXRoLmxvZyhNYXRoLnJhbmRvbSgpKSkgKiBNYXRoLmNvcygyLjAgKiBNYXRoLlBJICogTWF0aC5yYW5kb20oKSk7XG4gICAgcmV0dXJuIG4gKiBzdGQgKyBtZWFuO1xufVxuLyoqXG4gKiBQYXJldG8gZGlzdHJpYnV0aW9uIGltcGxlbWVudGF0aW9uIGJhc2VkIG9uIFxuICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFyZXRvX2Rpc3RyaWJ1dGlvbiNSYW5kb21fc2FtcGxlX2dlbmVyYXRpb25cbiAqIFxuICogQHBhcmFtIGFscGhhIHNoYXBlIHBhcmFtZXRlciwgYWxwaGEgPiAwXG4gKiBAcGFyYW0gbWluaW11bSBzY2FsZSBwYXJhbWV0ZXIsIG1pbmltdW0gPiAwXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gUGFyZXRvKGFscGhhLCBtaW5pbXVtKSB7XG5cdGlmIChhbHBoYSA9PSBudWxsKSBhbHBoYSA9IDEuMDtcblx0aWYgKG1pbmltdW0gPT0gbnVsbCkgbWluaW11bSA9IDEuMDtcblx0aWYgKGFscGhhIDw9IDAgfHwgbWluaW11bSA8PSAwKSByZXR1cm4gTmFOO1xuICAgIHJldHVybiBtaW5pbXVtIC8gTWF0aC5wb3coTWF0aC5yYW5kb20oKSwgMS4wIC8gYWxwaGEpO1xufVxuXG5cbi8qKlxuICogTG9nLWxvZ2lzdGljIGRpc3RyaWJ1dGlvbiBpbXBsZW1lbnRhdGlvbiBiYXNlZCBvbiBBLkxhdyBcIlNpbXVsYXRpb24gTW9kZWxsaW5nIGFuZCBBbmFseXNpc1wiLCA1ZSwgTWMgR3Jhdy1IaWxsLCAyMDE1LCBwLiA0NjBcbiAqIEBwYXJhbSBhbHBoYSBzaGFwZSBwYXJhbWV0ZXIsIGFscGhhID4gMFxuICogQHBhcmFtIGJldGEgc2NhbGUgcGFyYW1ldGVyLCBiZXRhID4gMFxuICogQHJldHVybnMgTG9nLWxvZ2lzdGljIGRpc3RyaWJ1dGVkIHJhbmRvbSB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gTG9nbG9naXN0aWMoYWxwaGEsIGJldGEpIHtcblx0aWYgKGFscGhhID09IG51bGwpIGFscGhhID0gMS4wO1xuXHRpZiAoYmV0YSA9PSBudWxsKSBiZXRhID0gMS4wO1xuXHRpZiAoYmV0YSA8PSAwIHx8IGFscGhhIDw9IDApIHJldHVybiBOYU47XG5cdHZhciB1ID0gTWF0aC5yYW5kb20oKTtcblx0cmV0dXJuIGJldGEgKiBNYXRoLnBvdyh1LygxLXUpLCAxL2FscGhhKTtcdFxufVxuXG5cbi8qKlxuICogV2VpYnVsbCBkaXN0cmlidXRpb24gaW1wbGVtZW50YXRpb24gYmFzZWQgb24gQS5MYXcgXCJTaW11bGF0aW9uIE1vZGVsbGluZyBhbmQgQW5hbHlzaXNcIiwgNWUsIE1jIEdyYXctSGlsbCwgMjAxNSwgcC4gNDU2XG4gKiBAcGFyYW0gYWxwaGEgc2hhcGUgcGFyYW1ldGVyLCBhbHBoYSA+IDBcbiAqIEBwYXJhbSBiZXRhIHNjYWxlIHBhcmFtZXRlciwgYmV0YSA+IDBcbiAqIEByZXR1cm5zIFdlaWJ1bGwgZGlzdHJpYnV0ZWQgcmFuZG9tIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBXZWlidWxsKGFscGhhLCBiZXRhKSB7XG5cdGlmIChhbHBoYSA9PSBudWxsKSBhbHBoYSA9IDEuMDtcblx0aWYgKGJldGEgPT0gbnVsbCkgYmV0YSA9IDEuMDtcblx0aWYgKGJldGEgPD0gMCB8fCBhbHBoYSA8PSAwKSByZXR1cm4gTmFOO1x0XG4gICAgcmV0dXJuIGJldGEgKiBNYXRoLnBvdygtTWF0aC5sb2coMS4wIC0gTWF0aC5yYW5kb20oKSksIDEuMCAvIGFscGhhKTtcbn1cblxuXG4vKipcbiAqIEVybGFuZyBkaXN0cmlidXRpb24gaW1wbGVtZW50YXRpb24gYmFzZWQgb24gQS5MYXcgXCJTaW11bGF0aW9uIE1vZGVsbGluZyBhbmQgQW5hbHlzaXNcIiwgNWUsIE1jIEdyYXctSGlsbCwgMjAxNSwgcC4gNDUzXG4gKiBAcGFyYW0gayBzaGFwZSBwYXJhbWV0ZXIsIGsgPSAxLDIsMywuLi5cbiAqIEBwYXJhbSBiZXRhIHNjYWxlIHBhcmFtZXRlciwgYmV0YSA+IDAsIGJldGEgPSAxL2xhbWJkYS4gRm9yIEVybGFuZyBkaXN0cmlidXRpb24gYmV0YSBpcyBlcXVhbCB0byB0aGUgbWVhbiB2YWx1ZS5cbiAqIEByZXR1cm5zIEVybGFuZyBkaXN0cmlidXRlZCByYW5kb20gdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEVybGFuZyhrLCBiZXRhKSB7XG5cdGlmIChrID09IG51bGwpIGsgPSAxO1xuXHRpZiAoYmV0YSA9PSBudWxsKSBiZXRhID0gMS4wO1xuXHR2YXIgbSA9IGsgfCAwO1xuXHRpZiAoYmV0YSA8PSAwIHx8IG0gPD0gMCkgcmV0dXJuIE5hTjtcblx0dmFyIG11bHQgPSAxLjA7XG5cdGZvciAodmFyIGk9MDtpPG07aSsrKSB7XG5cdFx0bXVsdCAqPSBNYXRoLnJhbmRvbSgpO1xuXHR9XG4gICAgcmV0dXJuIC1iZXRhL20qTWF0aC5sb2cobXVsdCk7XG59XG5cblxuLyoqXG4gKiBUcmlhbmd1bGFyIGRpc3RyaWJ1dGlvbiBpbXBsZW1lbnRhdGlvblxuICogQHBhcmFtIGEgbGVmdCBzaWRlXG4gKiBAcGFyYW0gYiByaWdodCBzaWRlLCBiID49IGFcbiAqIEBwYXJhbSBtIHRyaWFuZ2xlIHBlYWsgKG1vZGUpLCBhIDw9IG0gPD0gYlxuICogQHJldHVybnMgVHJpYW5ndWxhciBkaXN0cmlidXRlZCByYW5kb20gdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFRyaWFuZ3VsYXIoYSwgYiwgbSkge1xuICAgIGlmIChhID09IG51bGwpIGEgPSAwLjA7XG4gICAgaWYgKGIgPT0gbnVsbCkgYiA9IDEuMDtcbiAgICBpZiAobSA9PSBudWxsKSBtID0gMC41O1xuICAgIGlmIChhPmIgfHwgbSA8IGEgfHwgbSA+IGIpIHJldHVybiBOYU47XG5cdGlmIChhPT1iKSByZXR1cm4gYTtcbiAgICB2YXIgYyA9IChtIC0gYSkgLyAoYiAtIGEpO1xuICAgIHZhciBwID0gTWF0aC5yYW5kb20oKTtcbiAgICBpZiAocCA8PSBjKSB7XG4gICAgICAgIHJldHVybiBhICsgTWF0aC5zcXJ0KHAgKiAoYiAtIGEpICogKG0gLSBhKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGIgLSBNYXRoLnNxcnQoKDEgLSBwKSAqIChiIC0gYSkgKiAoYiAtIG0pKTtcbiAgICB9XG59XG5cblxuLyoqXG4gKiBUcmFwZXpvaWRhbCBkaXN0cmlidXRpb24gaW1wbGVtZW50YXRpb25cbiAqIEBwYXJhbSBhIGxlZnQgc2lkZVxuICogQHBhcmFtIGIgcmlnaHQgc2lkZSwgYiA+PSBhXG4gKiBAcGFyYW0gYyBsZWZ0IHRyYXBlem9pZCBwZWFrIChtb2RlKVxuICogQHBhcmFtIGQgcmlnaHQgdHJhcGV6b2lkIHBlYWsgKG1vZGUpLCBhIDw9IGMgPD0gZCA8PSBiXG4gKiBAcmV0dXJucyBUcmFwZXpvaWRhbCBkaXN0cmlidXRlZCByYW5kb20gdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFRyYXBlem9pZGFsKGEsIGIsIGMsIGQpIHtcbiAgICBpZiAoYSA9PSBudWxsKSBhID0gMC4wO1xuICAgIGlmIChiID09IG51bGwpIGIgPSAxLjA7XG4gICAgaWYgKGMgPT0gbnVsbCkgYyA9IDAuMjU7XG4gICAgaWYgKGQgPT0gbnVsbCkgZCA9IDAuNzU7XG4gICAgaWYgKGEgPiBiIHx8IGMgPCBhIHx8IGMgPiBkIHx8IGQgPiBiKSByZXR1cm4gTmFOO1xuXHRpZiAoYT09YikgcmV0dXJuIGE7XG4gICAgdmFyIHAxID0gKGMgLSBhKSAvICggKGIgLSBhKSsoZCAtIGMpKTtcbiAgICB2YXIgcDIgPSAoYiAtIGQpIC8gKCAoYiAtIGEpKyhkIC0gYykpO1xuICAgIHZhciBwID0gTWF0aC5yYW5kb20oKTtcbiAgICBcbiAgICBpZiAocCA8PSBwMSkge1xuICAgICAgICByZXR1cm4gYSArIE1hdGguc3FydChwICogKChiIC0gYSkrKGQgLSBjKSkgKiAoYyAtIGEpICk7XG4gICAgfSBlbHNlIGlmIChwID4gMS1wMikge1xuICAgICAgICByZXR1cm4gYiAtIE1hdGguc3FydCgoMSAtIHApICogKChiIC0gYSkrKGQgLSBjKSkgKiAoYiAtIGQpKTtcbiAgICB9IGVsc2Uge1xuICAgIFx0cmV0dXJuIGMgKyAoZC1jKSoocC1wMSkvKDEuMCAtIHAxIC0gcDIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBMb2dub3JtYWwgZGlzdHJpYnV0aW9uIGltcGxlbWVudGF0aW9uIGJhc2VkIG9uIEEuTGF3IFwiU2ltdWxhdGlvbiBNb2RlbGxpbmcgYW5kIEFuYWx5c2lzXCIsIDVlLCBNYyBHcmF3LUhpbGwsIDIwMTUsIHAuIDQ1OFxuICogQHBhcmFtIG1lYW4gbWVhbiB2YWx1ZVxuICogQHBhcmFtIHN0ZCBzdGFuZGFyZCBkZXZpYXRpb25cbiAqIEByZXR1cm5zIExvZ25vcm1hbGx5IGRpc3RyaWJ1dGVkIHJhbmRvbSB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gTG9nTm9ybWFsKG1lYW4sIHN0ZCkge1xuICAgIGlmIChtZWFuID09IG51bGwpIG1lYW4gPSAwLjA7XG4gICAgaWYgKHN0ZCA9PSBudWxsKSBzdGQgPSAxLjA7XG4gICAgaWYgKHN0ZCA8IDApIHJldHVybiBOYU47XG4gICAgcmV0dXJuIE1hdGguZXhwKE5vcm1hbChtZWFuLCBzdGQpKVxufVxuXG5cblxuLyoqXG4gKiBCZXJub3VsbGkgZGlzdHJpYnV0aW9uIGltcGxlbWVudGF0aW9uIGJhc2VkIG9uIEEuTGF3IFwiU2ltdWxhdGlvbiBNb2RlbGxpbmcgYW5kIEFuYWx5c2lzXCIsIDVlLCBNYyBHcmF3LUhpbGwsIDIwMTUsIHAuIDQ2NFxuICogQHBhcmFtIHAgcHJvYmFiaWxpdHkgb2YgMVxuICogQHJldHVybnMgQmVybm91bGxpIGRpc3RyaWJ1dGVkIHJhbmRvbSB2YWx1ZSAoemVybyBvciBvbmUpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBCZXJub3VsbGkocCkge1xuXHRpZiAocD09bnVsbCkgcCA9IDAuNTtcblx0aWYgKHA8MC4wIHwgcCA+IDEuMCkgcmV0dXJuIE5hTjtcbiAgICBpZiAoTWF0aC5yYW5kb20oKTw9cClcbiAgICBcdHJldHVybiAxO1xuICAgIGVsc2UgXG4gICAgXHRyZXR1cm4gMDtcbn1cblxuXG4vKipcbiAqIEJpbm9taWFsIGRpc3RyaWJ1dGlvbiBpbXBsZW1lbnRhdGlvbiBiYXNlZCBvbiBBLkxhdyBcIlNpbXVsYXRpb24gTW9kZWxsaW5nIGFuZCBBbmFseXNpc1wiLCA1ZSwgTWMgR3Jhdy1IaWxsLCAyMDE1LCBwLiA0NjlcbiAqIEBwYXJhbSBuIG51bWJlciBvZiB0cmlhbHNcbiAqIEBwYXJhbSBwIHN1Y2Nlc3MgcHJvYmFiaWxpdHkgaW4gZWFjaCB0cmlhbFxuICogQHJldHVybnMgQmlub21pYWwgZGlzdHJpYnV0ZWQgcmFuZG9tIHZhbHVlICgwLDEsLi4uLG4pXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBCaW5vbWlhbChuLHApIHtcblx0aWYgKG49PW51bGwpIG4gPSAxO1xuXHRpZiAocD09bnVsbCkgcCA9IDAuNTtcdFxuXHR2YXIgdCA9IG4gfCAwO1xuXHRpZiAoIHAgPCAwLjAgfCBwID4gMS4wIHwgdCA8PSAwKSByZXR1cm4gTmFOO1xuXHR2YXIgc3VtID0gMDtcblx0Zm9yICh2YXIgaT0wO2k8dDtpKyspIHtcblx0XHRzdW0gKz0gQmVybm91bGxpKHApO1xuXHR9XG4gICAgcmV0dXJuIHN1bTtcbn1cblxuLyoqXG4gKiBHZW9tZXRyaWMgZGlzdHJpYnV0aW9uIGltcGxlbWVudGF0aW9uIGJhc2VkIG9uIEEuTGF3IFwiU2ltdWxhdGlvbiBNb2RlbGxpbmcgYW5kIEFuYWx5c2lzXCIsIDVlLCBNYyBHcmF3LUhpbGwsIDIwMTUsIHAuIDQ2OVxuICogQHBhcmFtIHAgc3VjY2VzcyBwcm9iYWJpbGl0eSBcbiAqIEByZXR1cm5zIEdlb21ldHJpYyBkaXN0cmlidXRlZCByYW5kb20gdmFsdWUgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBHZW9tZXRyaWMocCkge1xuXHRpZiAocD09bnVsbCkgcCA9IDAuNTtcdFxuXHRpZiAoIHAgPD0gMC4wIHwgcCA+PSAxLjAgKSByZXR1cm4gTmFOO1x0XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5sb2coTWF0aC5yYW5kb20oKSkvTWF0aC5sb2coMS1wKSApIHwgMDtcbn1cblxuLyoqXG4gKiBQb2lzc29uIGRpc3RyaWJ1dGlvbiBpbXBsZW1lbnRhdGlvbiBiYXNlZCBvbiBBLkxhdyBcIlNpbXVsYXRpb24gTW9kZWxsaW5nIGFuZCBBbmFseXNpc1wiLCA1ZSwgTWMgR3Jhdy1IaWxsLCAyMDE1LCBwLiA0NzBcbiAqIEBwYXJhbSBsYW1iZGEgbWVhbiB2YWx1ZSBcbiAqIEByZXR1cm5zIFBvaXNzb24gZGlzdHJpYnV0ZWQgcmFuZG9tIHZhbHVlIFxuICovXG5leHBvcnQgZnVuY3Rpb24gUG9pc3NvbihsYW1iZGEpIHtcblx0aWYgKGxhbWJkYT09bnVsbCkgbGFtYmRhID0gMS4wO1x0XG5cdGlmICggbGFtYmRhIDw9IDAuMCApIHJldHVybiBOYU47XHRcblx0dmFyIGEgPSBNYXRoLmV4cCgtbGFtYmRhKTtcblx0dmFyIGIgPSAxLjA7XG5cdHZhciBpID0gMDtcdFxuXHR3aGlsZSAodHJ1ZSkge1xuXHRcdHZhciB1ID0gTWF0aC5yYW5kb20oKTtcblx0XHRiICo9IHU7XG5cdFx0aWYgKGIgPCBhKSByZXR1cm4gaTtcblx0XHRpICs9IDE7XG5cdH1cbn1cblxuLyoqXG4gKiBHYW1tYSBkaXN0cmlidXRpb24gaW1wbGVtZW50YXRpb24uXG4gKiBUaGlzIGNvZGUgaGFzIGJlZW4gY29waWVkIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9idGVsbGVzL3NpbWpzLXVwZGF0ZWQvXG4gKiBzaW1qcy11cGRhdGVkIGlzIGxpY2Vuc2VkIHVuZGVyIE1JVCBPcGVuIFNvdXJjZSBMaWNlbnNlIHRlcm1ucyBcbiAqIEBwYXJhbSBhbHBoYSBzaGFwZSBwYXJhbWV0ZXJcbiAqIEBwYXJhbSBiZXRhIHJhdGUgcGFyYW1ldGVyIFxuICogQHJldHVybnMgR2FtbWEgZGlzdHJpYnV0ZWQgcmFuZG9tIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gR2FtbWEoYWxwaGEsIGJldGEpIHtcblx0aWYgKGFscGhhID09IG51bGwpIGFscGhhID0gMS4wO1xuXHRpZiAoYmV0YSA9PSBudWxsKSBiZXRhID0gMS4wO1xuICAgIGlmIChhbHBoYSA+IDEuMCkge1xuICAgICAgICBsZXQgYWludiA9IE1hdGguc3FydCgyLjAgKiBhbHBoYSAtIDEuMCksXG4gICAgICAgICAgICBiYmIgPSBhbHBoYSAtIE1hdGgubG9nKDQuMCksXG4gICAgICAgICAgICBjY2MgPSBhbHBoYSArIGFpbnY7XG5cbiAgICAgICAgd2hpbGUgKHRydWUpIHsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgICAgICAgICBsZXQgdTEgPSByYW5kb20oKTtcblxuICAgICAgICAgICAgaWYgKCh1MSA8IDFlLTcpIHx8ICh1ID4gMC45OTk5OTk5KSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHUyID0gMS4wIC0gcmFuZG9tKCksXG4gICAgICAgICAgICAgICAgdiA9IE1hdGgubG9nKHUxIC8gKDEuMCAtIHUxKSkgLyBhaW52LFxuICAgICAgICAgICAgICAgIHggPSBhbHBoYSAqIE1hdGguZXhwKHYpLFxuICAgICAgICAgICAgICAgIHogPSB1MSAqIHUxICogdTIsXG4gICAgICAgICAgICAgICAgciA9IGJiYiArIGNjYyAqIHYgLSB4O1xuICAgICAgICAgICAgaWYgKChyICsgTWF0aC5sb2coNC41KSAtIDMuNSAqIHogPj0gMC4wKSB8fCAociA+PSBNYXRoLmxvZyh6KSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geCAqIGJldGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFscGhhID09IDEuMCkge1xuICAgICAgICBsZXQgdSA9IHJhbmRvbSgpO1xuICAgICAgICB3aGlsZSAodSA8PSAxZS03KSB7XG4gICAgICAgICAgICB1ID0gcmFuZG9tKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC1NYXRoLmxvZyh1KSAqIGJldGE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHg7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBsZXQgdSA9IHJhbmRvbSgpLFxuICAgICAgICAgICAgICAgIGIgPSAoTWF0aC5FICsgYWxwaGEpIC8gTWF0aC5FLFxuICAgICAgICAgICAgICAgIHAgPSBiICogdTtcbiAgICAgICAgICAgIGlmIChwIDw9IDEuMCkge1xuICAgICAgICAgICAgICAgIHggPSBNYXRoLnBvdyhwLCAxLjAgLyBhbHBoYSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHggPSAtTWF0aC5sb2coKGIgLSBwKSAvIGFscGhhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHUxID0gcmFuZG9tKCk7XG5cbiAgICAgICAgICAgIGlmIChwID4gMS4wKSB7XG4gICAgICAgICAgICAgICAgaWYgKHUxIDw9IE1hdGgucG93KHgsIChhbHBoYSAtIDEuMCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodTEgPD0gTWF0aC5leHAoLXgpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHggKiBiZXRhO1xuICAgIH1cbn1cbiIsImV4cG9ydCAqIGZyb20gJy4vc3JjL3NkLXJhbmRvbSc7XG4iXX0=
